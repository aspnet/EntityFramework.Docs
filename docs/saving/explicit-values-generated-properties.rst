Setting explicit values for generated properties
================================================

A generated property is a property whose value is generated (either by EF or the database) when the entity is added and/or updated. See :doc:`/modeling/generated-properties` for more information.

There may be situations where you want to set an explicit value for a generated property, rather than having one generated.

.. contents:: `In this article:`
    :depth: 2
    :local:

.. include:: /_shared/sample.txt
.. _sample: https://github.com/aspnet/EntityFramework.Docs/tree/master/docs/samples/EFSaving/ExplicitValuesGenerateProperties/

The model
---------

The model used in this article contains a single ``Employee`` entity.

.. literalinclude:: /samples/EFSaving/ExplicitValuesGenerateProperties/Employee.cs
        :language: c#
        :lines: 5-10
        :linenos:

The context is setup to target SQL Server:
 * By convention the ``Employee.EmployeeId`` property will be a store generated ``IDENTITY`` column
 * The ``Employee.EmploymentStarted`` property has also been setup to have values generated by the database for new entities

.. literalinclude:: /samples/EFSaving/ExplicitValuesGenerateProperties/EmployeeContext.cs
        :language: c#
        :lines: 5-20
        :linenos:

Saving an explicit value during add
-----------------------------------

In the following code, two employees are being inserted into the database
 * For the first, no value is assigned to ``Employee.EmploymentStarted`` property, so it remains set to the CLR default value for ``DateTime``.
 * For the second, we have set an explicit value of ``1-Jan-2000``.

.. literalinclude:: /samples/EFSaving/ExplicitValuesGenerateProperties/Sample.cs
        :language: c#
        :lines: 16-26
        :linenos:
        :emphasize-lines: 4

The code results in the following output, showing that the database generated a value for the first employee and our explicit value was used for the second::

  1: John Doe, 1/28/2016 12:00:00 AM
  2: Jane Doe, 1/1/2000 12:00:00 AM


Explicit values into SQL Server IDENTITY columns
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

For most situations, the approach shown above will work for key properties. However, to insert explicit values into a SQL Server ``IDENTITY`` column, you need to manually enable ``IDENTITY_INSERT`` before calling ``SaveChanges()``.

.. note::
  We have a `feature request <https://github.com/aspnet/EntityFramework/issues/703>`_ on our backlog to do this automatically within the SQL Server provider.

.. literalinclude:: /samples/EFSaving/ExplicitValuesGenerateProperties/Sample.cs
        :language: c#
        :lines: 34-56
        :linenos:
        :emphasize-lines: 6-16

Setting an explicit values during update
----------------------------------------

.. caution::
  Due to various bugs, this scenario is not properly supported in the current pre-release of EF Core. See `documentation issue #122 <https://github.com/aspnet/EntityFramework.Docs/issues/122>`_ for more details.
